{% extends "core_main.html" %}

{% block page_css %}
    <!-- Theme style -->
    <link href="{{ STATIC_URL }}AdminLte/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
    <link href="{{ STATIC_URL }}AdminLte/dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />
    <link href="{{ STATIC_URL }}AdminLte/plugins/iCheck/square/blue.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block body %}
    <body class="skin-blue">
{% endblock %}

{% block content %}
      <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>Редактирование товара</h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Главная</a></li>
                <li class="active">Отредактировать товар</li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="invoice">
            <!-- Table row -->
            <div class="row">
                    <div class="col-sm-12">
                        <a class="btn btn-default" href="/profile/organizer/purchase-{{ purchase_id }}/catalog-{{ catalog_id }}/product-{{ product.id }}">Вернуться в просмотр товара</a>
                    </div>
                    <!-- form start -->
                    <form action="" method="post" enctype="multipart/form-data" >
                        <div class="col-xs-6">
                            {% csrf_token %}
                            <hr/>
                            {{ product_form.as_p }}
                            <br/>
{#                            {{ property_form }}#}
                            <label>Возможные свойства этого товара:</label>
                            <div style="overflow: hidden;" id="all_properties">
                                {% for property in properties %}
                                    <div style="float:left;margin:0 10px 10px; 0;" >
                                        <label for="s{{ forloop.counter }}">{{ property }}</label>
                                        <input name="properties" id="s{{ forloop.counter }}" type="checkbox"
                                            {% for product_property in product_properties %}
                                                {% if property == product_property %}checked="checked"{% endif %}
                                            {% endfor %}
                                        value="{{ property }}" />
                                    </div>
                                 {% endfor %}
                            </div>
                            Выбрать: <a rel="all_properties" href="#select_all">Отметить всё</a>,
                            <a rel="all_properties" href="#select_none">Сбросить всё</a>
                            <br/>
                        </div><!-- /.col -->
                        <div class="col-xs-6">
                            <b>Image:</b>
                            <br/>
                            {% if product_image %}
                                <img src="{{ MEDIA_URL }}{{ product_image }}" width="100%" height="auto" alt=""/>
                            {% else %}
                                <img src="{{ STATIC_URL }}images/106_big.png" width="100%" height="auto" alt="Нет изображения" title="Нет изображения"/>
                            {% endif %}
                            <br/>
                            {{ product_image_form.as_p }}
                        </div>
                        <br/>
                        <div class="box-footer col-xs-12">
                            <button type="submit" class="btn btn-primary">Сохранить</button>
                        </div>
                    </form>


            </div><!-- /.row -->

        </section><!-- /.content -->
        <div class="clearfix"></div>
    </div><!-- /.content-wrapper -->

{% endblock %}




{% block page_js %}
    <script src="{{ STATIC_URL }}AdminLte/plugins/iCheck/icheck.min.js" type="text/javascript"></script>
    <script>
        $(function () {

            $('input').iCheck({
                checkboxClass: 'icheckbox_square-blue',
                radioClass: 'iradio_square-blue',
                increaseArea: '20%' // optional
                });

    
         // Активируем все чекбоксы
            //При клике на ссылку "Отметить все чекбоксы", активируем checkbox
            $("a[href='#select_all']").click( function() {
{#                $("#" + $(this).attr('rel') + " input:checkbox:enabled").prop('checked', true);#}
                $("#" + $(this).attr('rel') + " input:checkbox:enabled").iCheck('check');     //— change input's state to checked
                return false;
            });

            // Снимаем все отметки
            $("a[href='#select_none']").click( function() {
{#                $("#" + $(this).attr('rel') + " input:checkbox:enabled").prop('checked', false);#}
                $("#" + $(this).attr('rel') + " input:checkbox:enabled").iCheck('uncheck');   //— remove checked state
                return false;
            });

        });
    </script>
{% endblock %}



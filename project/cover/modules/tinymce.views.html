<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <title>Test coverage report: tinymce.views</title>
    <style type="text/css" media="screen">
      a
      {
        color: #3d707a;
      }
      
      a:hover, a:active
      {
        color: #bf7d18;
      }
    
      body 
      {
        font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
        font-size: 13px;
      }
      
      .nav 
      {
        font-size: 12px;
        margin-left: 50px;
      }

      .ignored
      {
        color: #707070;
      }

      .executed 
      {
        color: #3d9900;
      }

      .missed 
      {
        color: red;
        font-weight: bold;
      }

      .excluded 
      {
        color: #6090f0;
        font-weight: lighter;
      }
    
      #content-header 
      {
        font-size: 12px;
        padding: 18px 0 18px 50px;
      }

      #content-header h1 
      {
        font-size: 16px;
        margin: 10px 0 0 0;
        color: #909090;
      }
      
      #module-name
      {
        color: #583707;
      }
    
      #content-header p
      {
        font-size: 13px;
        margin: 0;
        color: #909090;
      }

      #content-header .normal 
      {
        color: #609030;
      }

      #content-header .warning 
      {
        color: #d0a000;
      }

      #content-header .critical 
      {
        color: red;
      }
      
      #source-listing 
      {
        margin-bottom: 24px;
      }

      #source-listing ol 
      {
        padding: 0 0 0 50px;
        width: 90%;
        font-family: monospace;
        list-style-position: outside;
      }

      #source-listing ol li 
      {
        line-height: 18px;
        font-size: small;
      }
        
      #source-listing ol code 
      {
        padding:  0 .001em 0 0; /* Firefox doesn't render empty li's properly */
        font-size: medium;
        white-space: pre;
      }
   </style>
  </head>

  <body>

<div class="nav">
  <a href="tinymce.models.html">tinymce.models</a> &lt;&lt;
  <a href="../index.html">index</a>
  &gt;&gt; <a href="tinymce.widgets.html">tinymce.widgets</a>
</div>

<div id="content-header">
  <h1>
    <span id="module-name">tinymce.views</span>:
    73 total statements,
    <span class="critical">0.0% covered</span>
  </h1>
  <p>Generated: Tue 2015-03-10 22:42 MSK</p>
  <p>Source file: /Users/greenteamer/Desktop/Django/env/sp/lib/python2.7/site-packages/tinymce/views.py</p>
  <p>
    Stats:
    <span class="executed">0 executed</span>,
    <span class="missed">60 missed</span>,
    <span class="excluded">13 excluded</span>,
    <span class="ignored">69 ignored</span> 
  </p> 
</div>

<div id="source-listing">
  <ol>
    <li class="ignored"><code># Copyright (c) 2008 Joost Cassee</code></li>
<li class="ignored"><code># Licensed under the terms of the MIT License (see LICENSE.txt)</code></li>
<li class="ignored"><code></code></li>
<li class="excluded"><code>import logging</code></li>
<li class="excluded"><code>from django.core import urlresolvers</code></li>
<li class="excluded"><code>from django.http import HttpResponse</code></li>
<li class="excluded"><code>from django.shortcuts import render_to_response</code></li>
<li class="excluded"><code>from django.template import RequestContext, loader</code></li>
<li class="excluded"><code>from django.utils.translation import ugettext as _</code></li>
<li class="excluded"><code>from tinymce.compressor import gzip_compressor</code></li>
<li class="excluded"><code>from tinymce.widgets import get_language_config</code></li>
<li class="missed"><code>try:</code></li>
<li class="excluded"><code>    import json</code></li>
<li class="missed"><code>except ImportError:</code></li>
<li class="excluded"><code>    from django.utils import simplejson as json</code></li>
<li class="missed"><code>try:</code></li>
<li class="excluded"><code>    from django.views.decorators.csrf import csrf_exempt</code></li>
<li class="missed"><code>except ImportError:</code></li>
<li class="missed"><code>    pass</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def textareas_js(request, name, lang=None):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Returns a HttpResponse whose content is a Javscript file. The template</code></li>
<li class="ignored"><code>    is loaded from 'tinymce/&lt;name&gt;_textareas.js' or</code></li>
<li class="ignored"><code>    '&lt;name&gt;/tinymce_textareas.js'. Optionally, the lang argument sets the</code></li>
<li class="ignored"><code>    content language.</code></li>
<li class="ignored"><code>    """</code></li>
<li class="missed"><code>    template_files = (</code></li>
<li class="ignored"><code>        'tinymce/%s_textareas.js' % name,</code></li>
<li class="ignored"><code>        '%s/tinymce_textareas.js' % name,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="missed"><code>    template = loader.select_template(template_files)</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>    vars = get_language_config(lang)</code></li>
<li class="missed"><code>    vars['content_language'] = lang</code></li>
<li class="missed"><code>    context = RequestContext(request, vars)</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>    return HttpResponse(template.render(context),</code></li>
<li class="ignored"><code>            content_type="application/x-javascript")</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def spell_check(request):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Returns a HttpResponse that implements the TinyMCE spellchecker protocol.</code></li>
<li class="ignored"><code>    """</code></li>
<li class="missed"><code>    try:</code></li>
<li class="excluded"><code>        import enchant</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>        raw = request.raw_post_data</code></li>
<li class="missed"><code>        input = json.loads(raw)</code></li>
<li class="missed"><code>        id = input['id']</code></li>
<li class="missed"><code>        method = input['method']</code></li>
<li class="missed"><code>        params = input['params']</code></li>
<li class="missed"><code>        lang = params[0]</code></li>
<li class="missed"><code>        arg = params[1]</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>        if not enchant.dict_exists(str(lang)):</code></li>
<li class="missed"><code>            raise RuntimeError("dictionary not found for language '%s'" % lang)</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>        checker = enchant.Dict(str(lang))</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>        if method == 'checkWords':</code></li>
<li class="missed"><code>            result = [word for word in arg if word and not checker.check(word)]</code></li>
<li class="missed"><code>        elif method == 'getSuggestions':</code></li>
<li class="missed"><code>            result = checker.suggest(arg)</code></li>
<li class="ignored"><code>        else:</code></li>
<li class="missed"><code>            raise RuntimeError("Unkown spellcheck method: '%s'" % method)</code></li>
<li class="missed"><code>        output = {</code></li>
<li class="ignored"><code>            'id': id,</code></li>
<li class="ignored"><code>            'result': result,</code></li>
<li class="ignored"><code>            'error': None,</code></li>
<li class="ignored"><code>        }</code></li>
<li class="missed"><code>    except Exception:</code></li>
<li class="missed"><code>        logging.exception("Error running spellchecker")</code></li>
<li class="missed"><code>        return HttpResponse(_("Error running spellchecker"))</code></li>
<li class="missed"><code>    return HttpResponse(json.dumps(output),</code></li>
<li class="ignored"><code>            content_type='application/json')</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>try:</code></li>
<li class="missed"><code>    spell_check = csrf_exempt(spell_check)</code></li>
<li class="missed"><code>except NameError:</code></li>
<li class="missed"><code>    pass</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def preview(request, name):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Returns a HttpResponse whose content is an HTML file that is used</code></li>
<li class="ignored"><code>    by the TinyMCE preview plugin. The template is loaded from</code></li>
<li class="ignored"><code>    'tinymce/&lt;name&gt;_preview.html' or '&lt;name&gt;/tinymce_preview.html'.</code></li>
<li class="ignored"><code>    """</code></li>
<li class="missed"><code>    template_files = (</code></li>
<li class="ignored"><code>        'tinymce/%s_preview.html' % name,</code></li>
<li class="ignored"><code>        '%s/tinymce_preview.html' % name,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="missed"><code>    template = loader.select_template(template_files)</code></li>
<li class="missed"><code>    return HttpResponse(template.render(RequestContext(request)),</code></li>
<li class="ignored"><code>            content_type="text/html")</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def flatpages_link_list(request):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Returns a HttpResponse whose content is a Javscript file representing a</code></li>
<li class="ignored"><code>    list of links to flatpages.</code></li>
<li class="ignored"><code>    """</code></li>
<li class="excluded"><code>    from django.contrib.flatpages.models import FlatPage</code></li>
<li class="missed"><code>    link_list = [(page.title, page.url) for page in FlatPage.objects.all()]</code></li>
<li class="missed"><code>    return render_to_link_list(link_list)</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def compressor(request):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Returns a GZip-compressed response.</code></li>
<li class="ignored"><code>    """</code></li>
<li class="missed"><code>    return gzip_compressor(request)</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def render_to_link_list(link_list):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Returns a HttpResponse whose content is a Javscript file representing a</code></li>
<li class="ignored"><code>    list of links suitable for use wit the TinyMCE external_link_list_url</code></li>
<li class="ignored"><code>    configuration option. The link_list parameter must be a list of 2-tuples.</code></li>
<li class="ignored"><code>    """</code></li>
<li class="missed"><code>    return render_to_js_vardef('tinyMCELinkList', link_list)</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def render_to_image_list(image_list):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Returns a HttpResponse whose content is a Javscript file representing a</code></li>
<li class="ignored"><code>    list of images suitable for use wit the TinyMCE external_image_list_url</code></li>
<li class="ignored"><code>    configuration option. The image_list parameter must be a list of 2-tuples.</code></li>
<li class="ignored"><code>    """</code></li>
<li class="missed"><code>    return render_to_js_vardef('tinyMCEImageList', image_list)</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def render_to_js_vardef(var_name, var_value):</code></li>
<li class="missed"><code>    output = "var %s = %s" % (var_name, json.dumps(var_value))</code></li>
<li class="missed"><code>    return HttpResponse(output, content_type='application/x-javascript')</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>def filebrowser(request):</code></li>
<li class="missed"><code>    try:</code></li>
<li class="missed"><code>        fb_url = request.build_absolute_uri(urlresolvers.reverse('fb_browse'))</code></li>
<li class="missed"><code>    except:</code></li>
<li class="missed"><code>        fb_url = request.build_absolute_uri(urlresolvers.reverse('filebrowser:fb_browse'))</code></li>
<li class="ignored"><code></code></li>
<li class="missed"><code>    return render_to_response('tinymce/filebrowser.js', {'fb_url': fb_url},</code></li>
<li class="ignored"><code>            context_instance=RequestContext(request))</code></li>
  </ol>
</div>

<div class="nav">
  <a href="tinymce.models.html">tinymce.models</a> &lt;&lt;
  <a href="../index.html">index</a>
  &gt;&gt; <a href="tinymce.widgets.html">tinymce.widgets</a>
</div>

  </body>
</html>

